/*!
 * @version caa1f67-dev
 * 
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{GURJ:function(e,t,n){"use strict"
var a=n("PBB4"),r=n.n(a)()(function(e){return e[1]})
r.push([e.i,":root {\n    --search-sidebar-width: 325px;\n}\n\n.searchPage-root-34R {\n    padding: 1rem;\n}\n\n.searchPage-noResult-29g {\n    display: flex;\n}\n\n.searchPage-headerButtons-3nW {\n    display: flex;\n    flex-basis: 100%;\n    justify-content: center;\n    margin: 1rem 0;\n}\n\n.searchPage-heading-_oz {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n}\n\n.searchPage-searchInfo-2wE {\n    line-height: var(--venia-global-typography-heading-lineHeight);\n    margin: 2.5rem 0 1rem;\n    max-width: 75vw;\n}\n\n.searchPage-totalPages-1O1 {\n    margin-left: 0.5rem;\n}\n\n.searchPage-headingHighlight-34F {\n    font-weight: var(--venia-global-fontWeight-bold);\n}\n\n.searchPage-sidebar-9K2 {\n    display: none;\n}\n\n@media (min-width: 1024px) {\n    .searchPage-root-34R {\n        display: flex;\n        flex-wrap: nowrap;\n    }\n\n    .searchPage-heading-_oz {\n        justify-content: space-between;\n        flex-wrap: nowrap;\n        align-items: center;\n    }\n\n    .searchPage-searchInfo-2wE {\n        margin: 0;\n        flex-basis: 100%;\n    }\n\n    .searchPage-headerButtons-3nW {\n        justify-content: flex-end;\n    }\n\n    .searchPage-sidebar-9K2 {\n        display: flex;\n        align-self: flex-start;\n        width: var(--search-sidebar-width);\n        padding-top: 4rem;\n    }\n\n    .searchPage-searchContent-3cZ {\n        flex-grow: 1;\n    }\n}\n",""]),r.locals={root:"searchPage-root-34R",noResult:"searchPage-noResult-29g",headerButtons:"searchPage-headerButtons-3nW",heading:"searchPage-heading-_oz",searchInfo:"searchPage-searchInfo-2wE",totalPages:"searchPage-totalPages-1O1",headingHighlight:"searchPage-headingHighlight-34F",sidebar:"searchPage-sidebar-9K2",searchContent:"searchPage-searchContent-3cZ"},t.a=r},N6ZK:function(e,t,n){"use strict"
n.r(t),n.d(t,"default",function(){return X})
var a,r,s,c,l=n("J4zp"),i=n.n(l),o=n("ERkP"),u=n.n(o),g=n("kQwz"),h=n("6sB8"),d=n("aWzz"),m=n("lSNA"),p=n.n(m),f=n("RIqP"),P=n.n(f),b=n("x8tt"),y=n("zCf4"),E=n("y1Xp"),j=n("OlZo"),w=n("Cszt"),O=n("PKba"),v=n("IOPv"),S=n("Unmo"),_=n("+wQL"),x=n("VkAN"),z=n.n(x),N=Object(b.gql)(a||(a=z()(["\n    query getPageSize {\n        storeConfig {\n            id\n            grid_per_page\n        }\n    }\n"]))),R=Object(b.gql)(r||(r=z()(["\n    query getProductFiltersBySearch($search: String!) {\n        products(search: $search) {\n            aggregations {\n                label\n                count\n                attribute_code\n                options {\n                    label\n                    value\n                }\n            }\n        }\n    }\n"]))),F=Object(b.gql)(s||(s=z()(["\n    query ProductSearch(\n        $currentPage: Int = 1\n        $inputText: String!\n        $pageSize: Int = 6\n        $filters: ProductAttributeFilterInput!\n        $sort: ProductAttributeSortInput\n    ) {\n        products(\n            currentPage: $currentPage\n            pageSize: $pageSize\n            search: $inputText\n            filter: $filters\n            sort: $sort\n        ) {\n            items {\n                id\n                name\n                price_range {\n                    maximum_price {\n                        regular_price {\n                            currency\n                            value\n                        }\n                    }\n                }\n                sku\n                small_image {\n                    url\n                }\n                stock_status\n                type_id\n                url_key\n            }\n            page_info {\n                total_pages\n            }\n            total_count\n        }\n    }\n"]))),C={getFilterInputsQuery:Object(b.gql)(c||(c=z()(['\n    query GetFilterInputsForSearch {\n        __type(name: "ProductAttributeFilterInput") {\n            inputFields {\n                name\n                type {\n                    name\n                }\n            }\n        }\n    }\n']))),getPageSize:N,getProductFiltersBySearchQuery:R,productSearchQuery:F},I=n("C0us"),k=n("rP9t"),Q=n("vh/y"),T=n("tuiD"),$=n("JCOj"),B=n("LboF"),M=n.n(B),q=n("GURJ"),A={injectType:"singletonStyleTag",insert:"head",singleton:!0},L=(M()(q.a,A),q.a.locals||{}),D=n("Y5d+"),H=n("hbEb"),J=n("pezu"),K=n("RL9Z"),U=n("LlM3"),W=n("zrp3"),Z=u.a.lazy(function(){return Promise.all([n.e(0),n.e(7),n.e(28)]).then(n.bind(null,"dzHx"))}),G=u.a.lazy(function(){return Promise.all([n.e(0),n.e(7),n.e(34)]).then(n.bind(null,"SAkj"))}),V=function SearchPage(e){var t=Object(E.a)(L,e.classes),n=function useSearchPage(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(E.a)(C,e.operations),n=t.getFilterInputsQuery,a=t.getPageSize,r=t.getProductFiltersBySearchQuery,s=t.productSearchQuery,c=Object(b.useQuery)(a,{fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}).data,l=c&&c.storeConfig.grid_per_page,u=Object(S.a)(),g=i()(u,1)[0],h=g.sortAttribute,d=g.sortDirection,m=Object(o.useRef)(g),f=Object(y.h)(),x=f.search,z=Object(o.useRef)(x),N=Object(w.a)(),R=i()(N,2),F=R[0],I=R[1],k=F.currentPage,Q=F.totalPages,T=I.setCurrentPage,$=I.setTotalPages,B=Object(j.b)(),M=i()(B,2)[1],q=M.toggleDrawer,A=M.actions.setPageLoading,L=Object(v.a)("query",f),D=Object(o.useMemo)(function(){var e=Object(_.b)(x)
if(0===e.size)return null
var t=e.get("category_id")
return t?P()(t).map(function(e){return e.split(",")[0]}).join(", "):null},[x]),H=Object(o.useCallback)(function(){q("filter")},[q]),J=Object(b.useQuery)(n),K=J.called,U=J.data,W=J.loading,Z=Object(o.useMemo)(function(){var e=new Map
return U&&U.__type.inputFields.forEach(function(t){var n=t.name,a=t.type
e.set(n,a.name)}),e},[U]),G={currentPage:k,setPage:T,totalPages:Q},V=Object(b.useLazyQuery)(s,{fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}),X=i()(V,2),Y=X[0],ee=X[1],te=ee.called,ne=ee.loading,ae=ee.error,re=ee.data,se=!!re&&ne
Object(o.useEffect)(function(){A(se)},[se,A]),Object(o.useEffect)(function(){if(Z.size&&l){var e=Object(_.b)(x),t={}
e.forEach(function(e,n){t[n]=Object(_.a)(e,Z.get(n))}),Y({variables:{currentPage:Number(k),filters:t,inputText:L,pageSize:Number(l),sort:p()({},h,d)}})}},[k,Z,L,Y,l,x,d,h]),Object(o.useEffect)(function(){var e=re?re.products.page_info.total_pages:null
return $(e),function(){$(null)}},[re,$]),Object(o.useEffect)(function(){var e=new URLSearchParams(z.current),t=new URLSearchParams(x)
e.delete("page"),t.delete("page"),e.toString()===t.toString()&&m.current.sortAttribute.toString()===g.sortAttribute.toString()&&m.current.sortDirection.toString()===g.sortDirection.toString()||(T(1,!0),z.current=x,m.current=g)},[g,x,T])
var ce=Object(b.useLazyQuery)(r,{fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}),le=i()(ce,2),ie=le[0],oe=le[1].data
Object(o.useEffect)(function(){L&&ie({variables:{search:L}})},[ie,L,x])
var ue=oe?oe.products.aggregations:null,ge=K&&!te||ne||W
return Object(O.a)(k),{data:re,error:ae,filters:ue,loading:ge,openDrawer:H,pageControl:G,searchCategory:D,searchTerm:L,sortProps:u}}(),a=n.data,r=n.error,s=n.filters,c=n.loading,l=n.pageControl,d=n.searchCategory,m=n.searchTerm,f=n.sortProps,x=Object(g.a)().formatMessage,z=i()(f,1)[0],N=Object(o.useMemo)(function(){return!a&&c?u.a.createElement(o.Fragment,null,u.a.createElement("section",{className:t.gallery},u.a.createElement(k.a,{items:Array.from({length:12}).fill(null)})),u.a.createElement("section",{className:t.pagination})):!a&&r?u.a.createElement("div",{className:t.noResult},u.a.createElement(h.a,{id:"searchPage.noResult",defaultMessage:"No results found. The search term may be missing or invalid."})):a?0===a.products.items.length?u.a.createElement("div",{className:t.noResult},u.a.createElement(h.a,{id:"searchPage.noResultImportant",defaultMessage:"No results found!"})):u.a.createElement(o.Fragment,null,u.a.createElement("section",{className:t.gallery},u.a.createElement(Q.a,{items:a.products.items})),u.a.createElement("section",{className:t.pagination},u.a.createElement(I.a,{pageControl:l}))):null},[t.gallery,t.noResult,t.pagination,r,c,a,l]),R=a&&a.products&&a.products.total_count?a.products.total_count:0,F=s&&s.length,B=null===s,M=R,q=!R&&c,A=F?u.a.createElement(J.a,{filters:s}):B?u.a.createElement(K.a,null):null,V=F?u.a.createElement(Z,{filters:s}):null,X=F?u.a.createElement(G,{filters:s}):B?u.a.createElement(U.a,null):null,Y=M?u.a.createElement(T.a,{sortProps:f}):q?u.a.createElement($.a,null):null,ee=M?u.a.createElement(D.a,{currentSort:z}):q?u.a.createElement(H.a,null):null,te=c?u.a.createElement(W.a,{width:5}):a?m?u.a.createElement(h.a,{id:"searchPage.searchTerm",values:{highlight:function highlight(e){return u.a.createElement("span",{className:t.headingHighlight},e)},category:d,term:m},defaultMessage:"Showing results:"}):u.a.createElement(h.a,{id:"searchPage.searchTermEmpty",defaultMessage:"Showing all results:"}):null,ne=a&&!c?u.a.createElement("span",{className:t.totalPages},x({id:"searchPage.totalPages",defaultMessage:"items"},{totalCount:R})):c?u.a.createElement(W.a,{width:5}):null
return u.a.createElement("article",{className:t.root},u.a.createElement("div",{className:t.sidebar},u.a.createElement(o.Suspense,{fallback:u.a.createElement(U.a,null)},X)),u.a.createElement("div",{className:t.searchContent},u.a.createElement("div",{className:t.heading},u.a.createElement("div",{className:t.searchInfo},te,ne),u.a.createElement("div",{className:t.headerButtons},A,Y),ee),N,u.a.createElement(o.Suspense,{fallback:null},V)))},X=V
V.propTypes={classes:Object(d.shape)({noResult:d.string,root:d.string,totalPages:d.string})}}}])
